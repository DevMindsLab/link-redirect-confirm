(()=>{var t={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return t.d(n,{a:n}),n},d:(r,n)=>{for(var o in n)t.o(n,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)};(()=>{"use strict";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},r(t,n)}const n=flarum.core.compat["forum/app"];var o=t.n(n);const e=flarum.core.compat["common/components/Modal"];var a=t.n(e);const i=flarum.core.compat["common/components/Button"];var c=t.n(i),u=function(t){function n(){return t.apply(this,arguments)||this}var e,a;a=t,(e=n).prototype=Object.create(a.prototype),e.prototype.constructor=e,r(e,a);var i=n.prototype;return i.oninit=function(r){t.prototype.oninit.call(this,r),this.url=r.attrs.url},i.className=function(){return"Modal--small LinkRedirectConfirmModal"},i.title=function(){return o().translator.trans("devmindslab-link-redirect-confirm.forum.modal.title")},i.content=function(){var t=this,r=this.url||"";return m("div",{className:"Modal-body"},m("p",null,o().translator.trans("devmindslab-link-redirect-confirm.forum.modal.body")),r?m("p",{className:"LinkRedirectConfirmModal-link"},o().translator.trans("devmindslab-link-redirect-confirm.forum.modal.link",{url:r})):null,m("div",{className:"Form-group"},c().component({className:"Button Button--secondary",onclick:function(){return t.hide()}},o().translator.trans("devmindslab-link-redirect-confirm.forum.modal.cancel")),c().component({className:"Button Button--primary",onclick:function(){return t.confirm()}},o().translator.trans("devmindslab-link-redirect-confirm.forum.modal.confirm"))))},i.confirm=function(){this.url&&(window.open(this.url,"_blank","noopener,noreferrer"),this.hide())},n}(a());o().initializers.add("devmindslab-link-redirect-confirm",function(){var t=o().forum&&o().forum.attribute&&o().forum.attribute("baseUrl")||o().forum&&o().forum.attribute&&o().forum.attribute("base_url")||o().data&&o().data.attributes&&o().data.attributes.baseUrl||"",r="";try{r=new URL(t).hostname}catch(t){r=window.location.hostname}var n,e=(n=o().forum&&o().forum.attribute&&o().forum.attribute("linkRedirectConfirmWhitelist")||o().data&&o().data.attributes&&o().data.attributes.linkRedirectConfirmWhitelist||"",n?n.split(/[,\s]+/).map(function(t){return t.trim()}).filter(Boolean):[]).concat([r]);document.addEventListener("click",function(n){var a=n.target&&n.target.closest?n.target.closest("a"):null;if(!function(t,r){return!(r&&r.href&&!r.hasAttribute("data-no-redirect-confirm")&&!t.defaultPrevented&&(!t.button||0===t.button))}(n,a)){var i;try{i=new URL(a.getAttribute("href"),t||window.location.href)}catch(t){return}["http:","https:"].includes(i.protocol)&&function(t,r,n){return!(!t||!t.hostname||t.hostname.toLowerCase()===r.toLowerCase()||function(t,r){return r.some(function(r){return function(t,r){if(!r)return!1;var n=r.replace(/^\*\./,"").toLowerCase(),o=t.toLowerCase();return o===n||o.endsWith("."+n)}(t,r)})}(t.hostname,n))}(i,r,e)&&(n.preventDefault(),n.stopPropagation(),o().modal.show(u,{url:i.href}))}},!0)})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map