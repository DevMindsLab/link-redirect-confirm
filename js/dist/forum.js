(()=>{var t={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return t.d(n,{a:n}),n},d:(r,n)=>{for(var e in n)t.o(n,e)&&!t.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:n[e]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r)};(()=>{"use strict";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},r(t,n)}const n=flarum.core.compat["forum/app"];var e=t.n(n);const o=flarum.core.compat["common/components/Modal"];var a=t.n(o);const i=flarum.core.compat["common/components/Button"];var u=t.n(i),c=function(t){function n(){return t.apply(this,arguments)||this}var o,a;a=t,(o=n).prototype=Object.create(a.prototype),o.prototype.constructor=o,r(o,a);var i=n.prototype;return i.oninit=function(r){t.prototype.oninit.call(this,r),this.url=r.attrs.url},i.className=function(){return"Modal--small LinkRedirectConfirmModal"},i.title=function(){return e().translator.trans("devmindslab-link-redirect-confirm.forum.modal.title")},i.content=function(){var t=this,r=this.url||"";return m("div",{className:"Modal-body"},m("p",null,e().translator.trans("devmindslab-link-redirect-confirm.forum.modal.body")),r?m("p",{className:"LinkRedirectConfirmModal-link"},e().translator.trans("devmindslab-link-redirect-confirm.forum.modal.link",{url:r})):null,m("div",{className:"Form-group"},u().component({className:"Button Button--secondary",onclick:function(){return t.hide()}},e().translator.trans("devmindslab-link-redirect-confirm.forum.modal.cancel")),u().component({className:"Button Button--primary",onclick:function(){return t.confirm()}},e().translator.trans("devmindslab-link-redirect-confirm.forum.modal.confirm"))))},i.confirm=function(){this.url&&(window.open(this.url,"_blank","noopener,noreferrer"),this.hide())},n}(a());e().initializers.add("devmindslab-link-redirect-confirm",function(){var t=e().forum&&e().forum.attribute&&e().forum.attribute("baseUrl")||e().forum&&e().forum.attribute&&e().forum.attribute("base_url")||e().data&&e().data.attributes&&e().data.attributes.baseUrl||"",r="";try{r=new URL(t).hostname}catch(t){r=window.location.hostname}var n,o=(n=e().forum&&e().forum.attribute&&e().forum.attribute("linkRedirectConfirmWhitelist")||e().data&&e().data.attributes&&e().data.attributes.linkRedirectConfirmWhitelist||"",n?n.split(/[,\s]+/).map(function(t){return t.trim()}).filter(Boolean):[]).concat(["rene-baumgarten.de",r]);document.addEventListener("click",function(n){var a=n.target&&n.target.closest?n.target.closest("a"):null;if(!function(t,r){return!(r&&r.href&&!r.hasAttribute("data-no-redirect-confirm")&&!t.defaultPrevented&&(!t.button||0===t.button))}(n,a)){var i;try{i=new URL(a.getAttribute("href"),t||window.location.href)}catch(t){return}["http:","https:"].includes(i.protocol)&&function(t,r,n){return!(!t||!t.hostname||t.hostname.toLowerCase()===r.toLowerCase()||function(t,r){return r.some(function(r){return function(t,r){if(!r)return!1;var n=r.replace(/^\*\./,"").toLowerCase(),e=t.toLowerCase();return e===n||e.endsWith("."+n)}(t,r)})}(t.hostname,n))}(i,r,o)&&(n.preventDefault(),n.stopPropagation(),e().modal.show(c,{url:i.href,target:getTarget(a,n)}))}},!0)})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map